
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../rust-api-developers-guide/">
      
      
        <link rel="next" href="../holon-loader-man-page/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.11">
    
    
      
        <title>Holon Data Loader Guide - MAP Developer Docs</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.4af4bdda.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="cyan">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#map-holon-data-loader-json-import-format-comprehensive-authoring-guide" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="MAP Developer Docs" class="md-header__button md-logo" aria-label="MAP Developer Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            MAP Developer Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Holon Data Loader Guide
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="cyan"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="cyan"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="MAP Developer Docs" class="md-nav__button md-logo" aria-label="MAP Developer Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    MAP Developer Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Mapp Developers
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Mapp Developers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../rust-api-developers-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Developers Guide to the MAP Rust-API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Holon Data Loader Guide
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Holon Data Loader Guide
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      ‚ú® Overview
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../holon-loader-man-page/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Holon Data Loader CLI Man Page
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tags_to_memes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tags to Memes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../extensibility-model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    The MAP Extensibility Model
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../trust-channel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Trust Channels
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Visualizer Developers
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    MAP Core
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            MAP Core
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/map-type-system-revised/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MAP Type System
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/transaction-model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    MAP Transaction Model
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/on-boarding/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    On-Boarding Flow
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/dances-design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Dances Design Spec
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/capsulization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Capsulization Strategy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/trust-channel-design-spec/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Trust Channel Design Spec
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/holon-data-loader-design-spec/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Holon Loader Spec
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/meta-value-types-import-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Meta-Value Import Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../core/i18n-design-spec/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Internationalization Design Spec
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Shared Concepts
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../shared/glossary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Glossary
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      ‚ú® Overview
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="map-holon-data-loader-json-import-format-comprehensive-authoring-guide">MAP Holon Data Loader: JSON Import Format ‚Äì Comprehensive Authoring Guide<a class="headerlink" href="#map-holon-data-loader-json-import-format-comprehensive-authoring-guide" title="Permanent link">&para;</a></h1>
<p>This guide provides developers with a complete and authoritative reference for constructing valid JSON import files for the MAP Holon Data Loader. It reflects current conventions for authoring schema definitions, base/core types, and domain-specific instances in a self-describing, holonic data model.</p>
<hr />
<h2 id="overview">‚ú® Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>The MAP Holon Data Loader allows for the declarative import of holons and their relationships into a (single) MAP Holon Space. The import format is intentionally minimal, self-describing, and designed for bootstrapping both type descriptors and real data without relying on runtime logic.</p>
<p>All holons ‚Äî including types, schemas, and instances ‚Äî are defined uniformly. Their type, structure, and descriptors are all expressible using the same format.</p>
<hr />
<h1 id="foundational-concepts">üìö Foundational Concepts<a class="headerlink" href="#foundational-concepts" title="Permanent link">&para;</a></h1>
<p>MAP import files are composed of <strong>holons</strong> ‚Äî self-contained objects representing types, data, or components. This section introduces key concepts that underpin the entire format.</p>
<h2 id="holons-and-types">Holons and Types<a class="headerlink" href="#holons-and-types" title="Permanent link">&para;</a></h2>
<p>Every holon has a <code>type</code> that points to a type descriptor (e.g., <code>BookType</code>, <code>PropertyType</code>). The type is used to determine:</p>
<ul>
<li>What properties are allowed</li>
<li>What relationships can be included</li>
<li>How validation is applied</li>
</ul>
<p>The <code>type</code> field acts as both a signal and a shortcut. It removes the need to include an explicit <code>DescribedBy</code> relationship.</p>
<h2 id="keyed-vs-keyless-holon-types">Keyed vs. Keyless Holon Types<a class="headerlink" href="#keyed-vs-keyless-holon-types" title="Permanent link">&para;</a></h2>
<p>Every holon in MAP is an instance of a <strong>HolonType</strong>, and that HolonType determines whether instances are <strong>keyed</strong> or <strong>keyless</strong>.</p>
<ul>
<li><strong>Keyed Holon Types</strong> require that each instance includes a stable <code>key</code>, derived from one or more of its properties using a <code>UsesKeyRule</code>. Holons of these types:</li>
<li>Must include a <code>key</code> field in the JSON import</li>
<li>May be referenced elsewhere using <code>$ref</code></li>
<li>
<p>May be the <strong>target</strong> of declared relationships</p>
</li>
<li>
<p><strong>Keyless Holon Types</strong> do <strong>not</strong> permit their instances to include a key. Holons of these types:</p>
</li>
<li>Must be <strong>embedded inline</strong> wherever they are used</li>
<li>May <strong>not</strong> be referenced via <code>$ref</code> (not even by <code>id:</code>)</li>
<li>May <strong>not</strong> be the <strong>target</strong> of any declared relationship</li>
<li>Must act as the <strong>source</strong> of at least one relationship to a keyed holon (to remain anchored in the graph)</li>
</ul>
<p>This distinction is structural and enforced during staging. The loader will reject any violation of these rules ‚Äî including attempts to reference or directly target a keyless holon.</p>
<blockquote>
<p>üîç Whether a holon is keyed is not an authoring choice ‚Äî it is defined by the HolonType it instantiates.</p>
</blockquote>
<h3 id="key-derivation-rules">üî¢ Key Derivation Rules<a class="headerlink" href="#key-derivation-rules" title="Permanent link">&para;</a></h3>
<p>Every keyed holon must declare a <code>UsesKeyRule</code>, pointing to a <code>FormatKeyRule</code> with:</p>
<ul>
<li><code>format</code>: A string template (e.g., <code>"$0"</code>, <code>"($0)-[$1]-&gt;($2)"</code>)</li>
<li><code>property_names</code>: List of property or inferred names used to fill the format</li>
</ul>
<p>The authored <code>key</code> must match the result of evaluating the format rule.</p>
<h2 id="foundational-rule-for-all-types">üß± Foundational Rule for All Types<a class="headerlink" href="#foundational-rule-for-all-types" title="Permanent link">&para;</a></h2>
<p>Every MAP type descriptor (e.g., <code>BookType</code>, <code>PropertyType</code>, <code>MetaHolonType</code>) must:</p>
<ul>
<li>‚úÖ Be <strong>DescribedBy the <code>MetaHolonType</code></strong> ‚Äî this defines the meta-structure of the type descriptor itself</li>
<li>‚úÖ <strong>Extend the foundational <code>MetaTypeDescriptor</code></strong> ‚Äî inheriting shared fields like <code>type_name</code>, <code>description</code>, etc.</li>
</ul>
<p>This rule applies uniformly to all types in MAP, including both core types (like <code>PropertyType</code>, <code>SchemaType</code>) and meta-types (like <code>MetaHolonType</code>, <code>MetaSchemaType</code>). It ensures:</p>
<ul>
<li>üîÑ Reflexivity ‚Äî Types are holons too</li>
<li>üîç Introspection ‚Äî Schema tools can explore and validate all descriptors using a shared structure</li>
<li>üß± Composability ‚Äî Specialized descriptors build on common foundations</li>
</ul>
<blockquote>
<p>üß† Even <code>MetaHolonType</code> itself is DescribedBy the <code>MetaHolonType</code> and Extends <code>MetaTypeDescriptor</code>.</p>
</blockquote>
<h3 id="holontype-requirements">üîê HolonType Requirements<a class="headerlink" href="#holontype-requirements" title="Permanent link">&para;</a></h3>
<p>In addition to the foundational rule above, all <strong>HolonTypes</strong> must:</p>
<ul>
<li>‚úÖ Declare a <code>UsesKeyRule</code> ‚Äî either a formatting rule (e.g., <code>TypeName.KeyRule</code>) or <code>None.KeyRule</code></li>
</ul>
<p>This ensures that the distinction between keyed and keyless types is structurally enforced and discoverable via introspection.</p>
<hr />
<h2 id="best-practices">üìö Best Practices<a class="headerlink" href="#best-practices" title="Permanent link">&para;</a></h2>
<ul>
<li>‚úÖ Include <code>UsesKeyRule</code> for every HolonType descriptor</li>
<li>‚úÖ Use consistent naming across <code>type_name</code>, <code>display_name</code>, and <code>key</code></li>
<li>‚úÖ Use inline embedding for keyless holons or unique instances</li>
<li>‚úÖ Use <code>$ref</code> for reusable, keyed holons</li>
<li>‚ùå Do not author <code>DescribedBy</code> or <code>OwnedBy</code> ‚Äî these are handled automatically</li>
</ul>
<hr />
<h2 id="referencing-other-holons-ref-and-inline-embedding">Referencing Other Holons: <code>$ref</code> and Inline Embedding<a class="headerlink" href="#referencing-other-holons-ref-and-inline-embedding" title="Permanent link">&para;</a></h2>
<p>In MAP‚Äôs JSON import format, holons frequently refer to other holons ‚Äî whether to define relationships, specify constraints, compose schemas, or extend descriptors. These references can be expressed in one of two interchangeable forms:</p>
<ol>
<li><strong><code>$ref</code> strings</strong> ‚Äî Concise pointers to other keyed holons</li>
<li><strong>Inline embedded holons</strong> ‚Äî Full holon objects defined in place</li>
</ol>
<p>Both forms are valid anywhere a holon is expected, and the Holon Data Loader treats them equivalently when staging, validating, and committing.</p>
<hr />
<h3 id="motivation-reference-scenarios-map-must-support">üß† Motivation: Reference Scenarios MAP Must Support<a class="headerlink" href="#motivation-reference-scenarios-map-must-support" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Scenario</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Staged vs. Saved</strong></td>
<td>Refer to holons defined in the same file or already saved in the space</td>
</tr>
<tr>
<td><strong>Local vs. External</strong></td>
<td>Link to holons from another HolonSpace (e.g., shared schemas)</td>
</tr>
<tr>
<td><strong>Keyed vs. Keyless</strong></td>
<td><code>$ref</code> keyed holons; embed keyless ones</td>
</tr>
<tr>
<td><strong>Reusable vs. One-Off</strong></td>
<td>Reuse types and entities via <code>$ref</code>; define constraints inline</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="ref-semantics">üß≠ <code>$ref</code> Semantics<a class="headerlink" href="#ref-semantics" title="Permanent link">&para;</a></h3>
<p><code>$ref</code> is a string-based shorthand for referencing previously defined, saved, or external <strong>keyed</strong> holons. It can be used anywhere a holon is expected and the type can be inferred from context.</p>
<h5 id="supported-ref-formats">Supported <code>$ref</code> Formats<a class="headerlink" href="#supported-ref-formats" title="Permanent link">&para;</a></h5>
<table>
<thead>
<tr>
<th><code>$ref</code> Format</th>
<th>Meaning</th>
<th>Example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>"#key"</code></td>
<td>Reference to a keyed holon by key only</td>
<td><code>"#future-primal"</code></td>
</tr>
<tr>
<td><code>"id:&lt;HolonId&gt;"</code></td>
<td>Reference by ActionHash (HolonId)</td>
<td><code>"id:uhCAkYmv..."</code></td>
</tr>
<tr>
<td><code>"@Proxy:key"</code></td>
<td>External holon via proxy name + key</td>
<td><code>"@Library:Books"</code></td>
</tr>
<tr>
<td><code>"ext:&lt;Proxy&gt;:&lt;Id&gt;"</code></td>
<td>External holon via proxy ID + local ID</td>
<td><code>"ext:uhProxy:uhId"</code></td>
</tr>
</tbody>
</table>
<blockquote>
<p>üîç <strong>The holon‚Äôs type is inferred from context.</strong><br />
If the key does not match a holon of the expected type, validation will fail.</p>
</blockquote>
<hr />
<h3 id="inline-embedded-holons">üì¶ Inline Embedded Holons<a class="headerlink" href="#inline-embedded-holons" title="Permanent link">&para;</a></h3>
<p>Use inline embedding to define a holon directly in context. This is required for:</p>
<ul>
<li><strong>Keyless holons</strong></li>
<li><strong>One-off structures</strong>, like constraints or descriptors</li>
<li>Situations where local scoping improves clarity</li>
</ul>
<blockquote>
<p>Caveat: Each inline Holon is importing a new Holon, be careful to avoid unwanted duplication</p>
</blockquote>
<hr />
<h3 id="reference-examples">‚úÖ Reference Examples<a class="headerlink" href="#reference-examples" title="Permanent link">&para;</a></h3>
<p>TBD</p>
<hr />
<h3 id="invalid-reference-cases">üö´ Invalid Reference Cases<a class="headerlink" href="#invalid-reference-cases" title="Permanent link">&para;</a></h3>
<ul>
<li>‚ùå <code>$ref</code> to a keyless holon (must be embedded)</li>
<li>‚ùå <code>id:</code> reference to a keyless holon ‚Äî even though syntactically allowed, <strong>keyless holons must never be the target of a declared relationship</strong></li>
<li>‚ùå References outside expected type context</li>
<li>‚ùå Mixing <code>$ref</code> and <code>type</code> in a single object</li>
</ul>
<hr />
<h3 id="summary">‚úÖ Summary<a class="headerlink" href="#summary" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Reference Form</th>
<th>Best For</th>
<th>Requires Key</th>
<th>Reusable?</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>$ref</code></td>
<td>Reuse of shared or saved holons</td>
<td>‚úÖ Yes</td>
<td>‚úÖ Yes</td>
</tr>
<tr>
<td>Inline</td>
<td>One-off or keyless components</td>
<td>‚ùå No</td>
<td>‚ùå No</td>
</tr>
</tbody>
</table>
<hr />
<h1 id="file-structure">üìÅ File Structure<a class="headerlink" href="#file-structure" title="Permanent link">&para;</a></h1>
<p>Each JSON import file consists of two top-level keys:</p>
<div class="highlight"><pre><span></span><code>{
  &quot;meta&quot;: { ... },
  &quot;holons&quot;: [ ... ]
}
</code></pre></div>
<ul>
<li><code>meta</code>: Metadata describing the file</li>
<li><code>holons</code>: List of holon definitions to be imported</li>
</ul>
<p>Each entry in the <code>holons</code> array is a self-contained JSON object representing a single holon.</p>
<hr />
<h2 id="holon-definition">üîπ Holon Definition<a class="headerlink" href="#holon-definition" title="Permanent link">&para;</a></h2>
<p>Each holon is a JSON object with four primary fields:</p>
<ul>
<li><code>type</code>: The descriptor for this holon (replaces <code>DescribedBy</code>)</li>
<li><code>key</code>: Required only for keyed holons</li>
<li><code>properties</code>: A map of named scalar property values</li>
<li><code>relationships</code>: A list of outbound relationships to other holons</li>
</ul>
<p>See the <strong>Foundational Concepts</strong> section above for background on types, keys, references, and embedding.</p>
<hr />
<h2 id="type">üß© <code>type</code><a class="headerlink" href="#type" title="Permanent link">&para;</a></h2>
<p>The <code>type</code> field identifies the HolonType (or other descriptor type) that describes this holon. It replaces the need to author a <code>DescribedBy</code> relationship.</p>
<ul>
<li>Format: a <code>#Key</code> reference to a known type descriptor</li>
<li>Required for all holons</li>
</ul>
<p>Example:</p>
<div class="highlight"><pre><span></span><code>&quot;type&quot;: &quot;#BookType&quot;
</code></pre></div>
<p>This implies:
- The holon is described by a <code>BookType</code>
- All properties and relationships must conform to the rules defined by that type</p>
<hr />
<h2 id="key">üß© <code>key</code><a class="headerlink" href="#key" title="Permanent link">&para;</a></h2>
<p>The <code>key</code> is a unique identifier for <strong>keyed</strong> holons. It is:</p>
<ul>
<li>Required for holons of <strong>keyed Holon Types</strong></li>
<li>Not allowed for holons of <strong>keyless Holon Types</strong></li>
<li>Used as the reference target for <code>$ref</code> within the same or other import files</li>
</ul>
<p>Keys are derived based on the holon‚Äôs <strong>HolonType</strong>, which includes a <code>UsesKeyRule</code> relationship pointing to a <code>FormatKeyRule</code>. This rule specifies how to construct the key from the holon‚Äôs property values ‚Äî and sometimes values on <strong>related holons</strong>.</p>
<blockquote>
<p>üîÑ Because the key can be deterministically derived from the holon‚Äôs structure, including it is <strong>technically redundant</strong>. However, the <code>key</code> field is explicitly included in the JSON import for:
- Improved readability
- <code>$ref</code> compatibility
- Validation of key correctness at staging time</p>
</blockquote>
<h3 id="important">‚ö†Ô∏è Important<a class="headerlink" href="#important" title="Permanent link">&para;</a></h3>
<p>If any property value involved in key derivation changes, the <code>key</code> field and any <code>$ref</code>'s to it <strong>must also be updated</strong> to match the new derived value. The loader will recompute the key using the declared <code>FormatKeyRule</code> and compare it to the authored key ‚Äî raising a validation error if they do not match.</p>
<hr />
<h3 id="key-derivation-rules_1">üî¢ Key Derivation Rules<a class="headerlink" href="#key-derivation-rules_1" title="Permanent link">&para;</a></h3>
<p>Every keyed holon must declare a <code>UsesKeyRule</code> relationship pointing to a <code>FormatKeyRule</code> ‚Äî a holon that defines how the key should be constructed.</p>
<h4 id="formatkeyrule-structure">FormatKeyRule Structure<a class="headerlink" href="#formatkeyrule-structure" title="Permanent link">&para;</a></h4>
<p>A <code>FormatKeyRule</code> has two fields:</p>
<ul>
<li><code>format</code>: A string template (e.g., <code>"$0"</code>, <code>"($0)-[$1]-&gt;($2)"</code>)</li>
<li><code>property_names</code>: An ordered list of names (strings) that supply the values for the placeholders</li>
</ul>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;#FormatKeyRule&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;format&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$0&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;property_names&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;type_name&quot;</span><span class="p">]</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="common-patterns">‚úÖ Common Patterns<a class="headerlink" href="#common-patterns" title="Permanent link">&para;</a></h4>
<p><strong>Single-property key</strong> (e.g., <code>MapStringValueType</code>):
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;format&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$0&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;property_names&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;type_name&quot;</span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div></p>
<p>**Relationship Type Keys ** (inspired by OpenCypher notation):
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;format&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;($0)-[$1]-&gt;($2)&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;property_names&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;source_type&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;type_name&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;target_type&quot;</span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div></p>
<h4 id="declaring-useskeyrule">‚úçÔ∏è Declaring UsesKeyRule<a class="headerlink" href="#declaring-useskeyrule" title="Permanent link">&para;</a></h4>
<p>Inline:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;UsesKeyRule&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;target&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;#FormatKeyRule&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;format&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;$0&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;property_names&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;type_name&quot;</span><span class="p">]</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>By reference:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;UsesKeyRule&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;target&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;$ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;FormatKeyRule:BookType.KeyRule&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>The loader validates all authored <code>key</code> values by recomputing them using the declared key rule and comparing the result.</p>
<hr />
<h2 id="properties">üß© <code>properties</code><a class="headerlink" href="#properties" title="Permanent link">&para;</a></h2>
<p>The <code>properties</code> field contains a map of property name to <strong>scalar value</strong>, like so:</p>
<div class="highlight"><pre><span></span><code>&quot;properties&quot;: {
  &quot;type_name&quot;: &quot;BookType&quot;,
  &quot;enabled&quot;: true,
  &quot;max_length&quot;: 255
}
</code></pre></div>
<p>Each value must be one of the supported MAP scalar types:
- <code>string</code> (e.g., <code>"BookType"</code>)
- <code>number</code> (e.g., <code>42</code>, <code>3.14</code>)
- <code>boolean</code> (e.g., <code>true</code>, <code>false</code>)
- or an array of scalars (for multi-valued properties)</p>
<p>Property types are enforced by the <code>PropertyType</code> descriptor referenced in the holon‚Äôs <code>type</code>. The loader will convert each value into its appropriate <code>BaseValue</code> variant based on the declared value type ‚Äî not based on any in-band <code>"type"</code> or <code>"value"</code> tags.</p>
<blockquote>
<p>üîí Property values must be scalars. You <strong>cannot</strong> use structured objects (like <code>{ "type": ..., "value": ... }</code>) inside the <code>properties</code> field. Those are only valid in embedded holons or type definitions.</p>
</blockquote>
<hr />
<h2 id="relationships">üß© <code>relationships</code><a class="headerlink" href="#relationships" title="Permanent link">&para;</a></h2>
<p>In MAP, <strong>every relationship pair</strong> is modeled as two named, uni-directional relationships:</p>
<ul>
<li>A <strong>declared relationship</strong> (e.g., <code>(Person)-[HasAddress]-&gt;(Address)</code>)</li>
<li>Its corresponding <strong>inverse relationship</strong> (e.g., <code>(Address)-[AddressOf]-&gt;(Person)</code>)</li>
</ul>
<p>Strictly speaking, only <strong>declared relationships</strong> are allowed to be <strong>directly populated in the system‚Äôs internal storage model</strong>. Inverse relationships are <strong>automatically derived</strong> based on this. However, the <strong>JSON import format allows you to populate either direction</strong> for convenience.</p>
<p>If a JSON import populates an <strong>inverse relationship</strong>, the <em>Holon Data Loader</em> will:</p>
<ol>
<li>Look up its <code>InverseOf</code> link to find the declared relationship type.</li>
<li>Internally redirect the population to that declared relationship.</li>
<li>Leave the inverse direction empty (it will be auto-derived later).</li>
</ol>
<p>This supports a more natural and readable JSON layout in many scenarios.</p>
<hr />
<h3 id="authoring-guidelines">‚ö†Ô∏è Authoring Guidelines<a class="headerlink" href="#authoring-guidelines" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>‚úÖ <strong>Only populate one direction</strong> of a relationship pair.<br />
  Do <strong>not</strong> populate both <code>HasAddress</code> and <code>AddressOf</code>.</p>
</li>
<li>
<p>‚ö†Ô∏è If the relationship involves a <strong>keyless holon type</strong>:</p>
</li>
<li>The <strong>declared relationship</strong> must be defined on the <strong>keyed holon type</strong>.</li>
<li>You must <strong>embed the keyless holon inline</strong>, using the <strong>inverse direction</strong>.</li>
</ul>
<hr />
<h3 id="example-embedding-a-keyless-holon">‚úÖ Example: Embedding a Keyless Holon<a class="headerlink" href="#example-embedding-a-keyless-holon" title="Permanent link">&para;</a></h3>
<p>Let‚Äôs say <code>PersonType</code> declares the relationship <code>HasAddress ‚Üí AddressType</code>, and <code>AddressType</code> is keyless. We want to attach an address to a person:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;#PersonType&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;key&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;charles-eisenstein&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Charles Eisenstein&quot;</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;relationships&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;AddressOf&quot;</span><span class="p">,</span><span class="w">  </span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;#AddressType&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;city&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Keene&quot;</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;state&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;New Hampshire&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="explanation">üß† Explanation<a class="headerlink" href="#explanation" title="Permanent link">&para;</a></h3>
<ul>
<li><code>AddressType</code> is keyless ‚Üí it <strong>must not</strong> be the target of a declared relationship.</li>
<li><code>PersonType</code> declares <code>HasAddress ‚Üí AddressType</code></li>
<li>JSON authors embed the keyless <code>Address</code> and populate its <strong>inverse relationship</strong>, <code>AddressOf ‚Üí Person</code></li>
<li>The loader internally flips it and populates <code>HasAddress(charles-eisenstein ‚Üí [Address])</code></li>
</ul>
<h3 id="declared-vs-inverse-relationships">üîÅ Declared vs. Inverse Relationships<a class="headerlink" href="#declared-vs-inverse-relationships" title="Permanent link">&para;</a></h3>
<p>When importing <strong>instance holons</strong>, each outbound <code>relationship</code> must ultimately correspond to a <strong>declared relationship</strong> ‚Äî that is, a relationship defined as outbound from the holon‚Äôs type.</p>
<p>However, the MAP import format allows you to use <strong>either direction of a relationship pair</strong> when authoring instance data:</p>
<ul>
<li>A <strong>declared relationship</strong>, such as:
  <div class="highlight"><pre><span></span><code>(Book)-[AUTHORED_BY]-&gt;(Person)
</code></pre></div></li>
<li>Its corresponding <strong>inverse relationship</strong>, such as:
  <div class="highlight"><pre><span></span><code>(Person)-[AuthorOf]-&gt;(Book)
</code></pre></div></li>
</ul>
<p>These two together form a <strong>relationship pair</strong>, where one is marked as the <code>InverseOf</code> the other in its relationship type definition.</p>
<blockquote>
<p>üîÑ Even though only declared relationships are persisted, the loader will <strong>redirect inverse relationship usage to the appropriate declared relationship</strong> and populate it accordingly.</p>
</blockquote>
<hr />
<h3 id="authoring-either-direction">‚úÖ Authoring Either Direction<a class="headerlink" href="#authoring-either-direction" title="Permanent link">&para;</a></h3>
<p>In your JSON import file, you may use either side:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;AUTHORED_BY&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;target&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;$ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;person-789&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>or:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;AuthorOf&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;target&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;$ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;book-123&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Either form will result in the declared <code>AUTHORED_BY</code> relationship being populated.</p>
<hr />
<h3 id="authoring-guidelines_1">‚ö†Ô∏è Authoring Guidelines<a class="headerlink" href="#authoring-guidelines_1" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>‚úÖ <strong>Only populate one direction</strong> of a relationship pair.<br />
  Do <strong>not</strong> populate both <code>AUTHORED_BY</code> and <code>AuthorOf</code> ‚Äî choose one or the other.</p>
</li>
<li>
<p>‚ö†Ô∏è If one end of the relationship is a <strong>keyless holon</strong> (e.g., an inline annotation or constraint):</p>
</li>
<li>The <strong>keyless holon‚Äôs type must declare</strong> the relationship.</li>
<li>You must populate the <strong>inverse direction</strong> using an <strong>embedded target</strong>, not a <code>$ref</code>.</li>
</ul>
<hr />
<blockquote>
<p>üß† Internally, only <strong>declared relationships</strong> are directly populated. The system automatically backfills the corresponding <strong>inverse relationships</strong>.</p>
</blockquote>
<p>A separate section provides guidance on <strong>defining declared and inverse relationship types</strong>, and how the <code>InverseOf</code> and <code>Inverse</code> links connect them.</p>
<p>In MAP, <strong>every relationship pair</strong> is modeled as two named, uni-directional relationships:</p>
<ul>
<li>A <strong>declared relationship</strong> (e.g., <code>(Book)-[AuthoredBy]-&gt;(Person)</code>)</li>
<li>Its corresponding <strong>inverse relationship</strong> (e.g., <code>(Person)-[AuthorOf]-&gt;(Book)</code>)</li>
</ul>
<p>Strictly speaking, only <strong>declared relationships</strong> are allowed to be <strong>directly populated in the system‚Äôs internal storage model</strong>. Inverse relationships are <strong>automatically derived</strong> based on this. However, the <strong>JSON import format allows you to populate either direction</strong> for convenience.</p>
<p>If a JSON import populates an <strong>inverse relationship</strong>, the <em>Holon Data Loader</em> will:</p>
<ol>
<li>Look up its <code>InverseOf</code> link to find the declared relationship type.</li>
<li>Internally redirect the population to that declared relationship.</li>
<li>Leave the inverse direction empty (it will be auto-derived later).</li>
</ol>
<p>This supports a more natural and readable JSON layout in many scenarios.</p>
<h4 id="example-using-inverse-in-json">‚úÖ Example: Using Inverse in JSON<a class="headerlink" href="#example-using-inverse-in-json" title="Permanent link">&para;</a></h4>
<p>You may populate the <code>Extends</code> relationship directly:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Extends&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;target&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;$ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;MetaTypeDescriptor&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Or, equivalently, populate the inverse <code>ExtendedBy</code>:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ExtendedBy&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;target&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;#MetaHolonType&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;properties&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;type_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;MetaHolonType&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Both will result in the same internal relationship being established ‚Äî on the declared <code>Extends</code> direction.</p>
<hr />
<h3 id="authoring-rules-and-caveats">‚ö†Ô∏è Authoring Rules and Caveats<a class="headerlink" href="#authoring-rules-and-caveats" title="Permanent link">&para;</a></h3>
<p>To ensure consistency and correctness, observe the following:</p>
<ul>
<li>‚úÖ <strong>Only one direction</strong> of a relationship pair should be populated in your JSON file.</li>
<li>‚úÖ If you choose to use the <strong>inverse relationship</strong> in your JSON, ensure the inverse type includes an <code>InverseOf</code> link to its declared counterpart.</li>
<li>‚ö†Ô∏è If <strong>either</strong> source or target holon type in the relationship is <strong>keyless</strong>:</li>
<li>That keyless type <strong>must declare</strong> the relationship (i.e., be the source of the declared direction).</li>
<li>The <strong>inverse direction must be populated inline</strong>, via embedded holons ‚Äî since keyless holons cannot be referenced.</li>
</ul>
<hr />
<h3 id="relationship-pairing-inverseof-and-inverse">üîÑ Relationship Pairing: <code>InverseOf</code> and <code>Inverse</code><a class="headerlink" href="#relationship-pairing-inverseof-and-inverse" title="Permanent link">&para;</a></h3>
<p>Each inverse relationship must include an <code>InverseOf</code> link to its declared counterpart:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;InverseOf&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;target&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;$ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;#(RelationshipType)-[Extends]-&gt;(RelationshipType)&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Once this is present, the system automatically adds the reverse link using <code>Inverse</code>:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Inverse&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;target&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;$ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;#(RelationshipType)-[ExtendedBy]-&gt;(RelationshipType)&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>You do <strong>not</strong> need to author <code>Inverse</code> links directly.</p>
<p>==== OLDER STUFF</p>
<p>The <code>relationships</code> field is a list of outbound links from the holon to other holons.</p>
<p>Each entry must contain:
- <code>name</code>: the name of the relationship
- <code>target</code>: a single holon, a <code>$ref</code>, or an array of either</p>
<p>You may use either of the following forms:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;UsesKeyRule&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;target&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;$ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;FormatKeyRule:Book.KeyRule&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>or</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Components&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;target&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;$ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;BookType&quot;</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;$ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PersonType&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<blockquote>
<p>‚úÖ The loader automatically normalizes all <code>target</code> values to arrays.<br />
Even single references are treated as 1-element arrays internally.</p>
<p>‚ö†Ô∏è Cardinality constraints are enforced using the type descriptor associated with the relationship name. For example, relationships like <code>DescribedBy</code> or <code>ComponentOf</code> often have <code>max_cardinality = 1</code>.</p>
</blockquote>
<h1 id="embedded-schema-structure">üìÇ Embedded Schema Structure<a class="headerlink" href="#embedded-schema-structure" title="Permanent link">&para;</a></h1>
<p>Schemas may embed their components directly via inverse relationships:</p>
<div class="highlight"><pre><span></span><code>{
  &quot;type&quot;: &quot;#MapSchemaType&quot;,
  &quot;key&quot;: &quot;MAP Core Schema&quot;,
  &quot;relationships&quot;: [
    {
      &quot;name&quot;: &quot;Components&quot;,
      &quot;target&quot;: [ { &quot;holon&quot; }, { &quot;holon&quot; } ]
    }
  ]
}
</code></pre></div>
<p>These will be rewritten by the loader into <code>ComponentOf</code> declarations from each child.</p>
<h2 id="defining-the-relationships-for-a-type">Defining the Relationships for a Type:<a class="headerlink" href="#defining-the-relationships-for-a-type" title="Permanent link">&para;</a></h2>
<h3 id="declaring-vs-instantiating-relationships">üîÑ Declaring vs. Instantiating Relationships<a class="headerlink" href="#declaring-vs-instantiating-relationships" title="Permanent link">&para;</a></h3>
<p>In the MAP import format, it is essential to distinguish between two conceptually distinct usages of relationships:</p>
<h4 id="1-declaring-allowed-relationships-for-a-type">1. Declaring Allowed Relationships for a Type<a class="headerlink" href="#1-declaring-allowed-relationships-for-a-type" title="Permanent link">&para;</a></h4>
<p>When defining a <strong>type descriptor</strong>, we use the <code>InstanceRelationships</code> relationship to declare what kinds of relationships instances of this type <strong>may</strong> include. The targets of <code>InstanceRelationships</code> must be <strong>relationship types</strong>.</p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;InstanceRelationships&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;target&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;$ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;#(TypeDescriptor)-[ComponentOf]-&gt;(Schema)&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<p>This states that instances of this type (e.g., <code>TypeDescriptor</code>) may include a <code>ComponentOf</code> relationship, and identifies the structural pattern expected for that relationship. The details of that relationship type (cardinality constraints, whether it is definitional, etc.) are defined in the referenced RelationshipType descriptor.</p>
<h4 id="2-instantiating-a-specific-relationship-for-a-holon">2. Instantiating a Specific Relationship for a Holon<a class="headerlink" href="#2-instantiating-a-specific-relationship-for-a-holon" title="Permanent link">&para;</a></h4>
<p>When authoring a specific <strong>holon</strong>, such as a type descriptor or instance, the <code>relationships</code> field is used to instantiate actual relationship <strong>instances</strong>. These entries must include:</p>
<ul>
<li>A <code>name</code>: the name of the relationship</li>
<li>A <code>target</code>: the holon being linked to (typically via <code>$ref</code>)</li>
</ul>
<p>‚úÖ <strong>Correct:</strong></p>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;UsesKeyRule&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;target&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;$ref&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;#TypeName.KeyRule&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>‚ùå <strong>Incorrect:</strong></p>
<div class="highlight"><pre><span></span><code>{
  &quot;name&quot;: &quot;UsesKeyRule&quot;,
  &quot;target&quot;: {
    &quot;type&quot;: &quot;#Format.KeyRuleType&quot;,
    &quot;key&quot;: &quot;TypeName.KeyRule&quot;,
    ...
  }
}
</code></pre></div>
<p>The incorrect version attempts to define the target inline ‚Äî which may duplicate shared definitions and blur the separation of concerns between <strong>relationship declarations</strong> and <strong>relationship instances</strong>.</p>
<hr />
<h3 id="key-takeaway">üß≠ Key Takeaway<a class="headerlink" href="#key-takeaway" title="Permanent link">&para;</a></h3>
<blockquote>
<p>When declaring which relationships a type supports, point to <strong>relationship types</strong>.<br />
When instantiating a relationship in a holon, point to a <strong>target holon</strong> ‚Äî typically via <code>$ref</code>.</p>
</blockquote>
<p>Following this rule ensures structural clarity, enables reuse, and keeps the MAP type system modular and DRY.</p>
<hr />
<h2 id="key-derivation-rules_2">üî¢ Key Derivation Rules<a class="headerlink" href="#key-derivation-rules_2" title="Permanent link">&para;</a></h2>
<p>Every keyed holon must declare a <code>UsesKeyRule</code>, pointing to a <code>FormatKeyRule</code> with:</p>
<ul>
<li><code>format</code>: A string template (e.g., <code>"$0"</code>, <code>"($0)-[$1]-&gt;($2)"</code>)</li>
<li><code>property_names</code>: List of property or inferred names used to fill the format</li>
</ul>
<p>The authored <code>key</code> must match the result of evaluating the format rule.</p>
<hr />
<h2 id="best-practices_1">üìö Best Practices<a class="headerlink" href="#best-practices_1" title="Permanent link">&para;</a></h2>
<ul>
<li>‚úÖ Include <code>UsesKeyRule</code> for every keyed type descriptor</li>
<li>‚úÖ Use consistent naming across <code>type_name</code>, <code>display_name</code>, and <code>key</code></li>
<li>‚úÖ Use inline embedding for keyless holons or unique instances</li>
<li>‚úÖ Use <code>$ref</code> for reusable, keyed holons</li>
<li>‚ùå Do not author <code>DescribedBy</code> or <code>OwnedBy</code> ‚Äî these are handled automatically</li>
</ul>
<hr />
<h2 id="validation">üîé Validation<a class="headerlink" href="#validation" title="Permanent link">&para;</a></h2>
<table>
<thead>
<tr>
<th>Rule ID</th>
<th>Title</th>
<th>Description</th>
<th>Severity</th>
</tr>
</thead>
<tbody>
<tr>
<td>json-schema</td>
<td>Syntactic validation via JSON Schema</td>
<td>The file must conform to the MAP JSON import format schema.</td>
<td>error</td>
</tr>
<tr>
<td>foundational-rule</td>
<td>Foundational Rule for All Type Descriptors</td>
<td>Every Type Descriptor must be <code>DescribedBy</code> <code>TypeDescriptor</code> and <code>Extend</code> (at most) exactly 1 Abstract Type.</td>
<td>error</td>
</tr>
<tr>
<td>unresolved-refs</td>
<td>Unresolved References</td>
<td>All $ref values must resolve to a keyed holon defined in the same or explicitly provided files.</td>
<td>error</td>
</tr>
<tr>
<td>only-declared-properties</td>
<td>Only Declared Properties May Be Populated</td>
<td>Holons must not specify properties not listed in InstanceProperties of their type.</td>
<td>error</td>
</tr>
<tr>
<td>only-declared-relationships</td>
<td>Only Valid Relationships May Be Authored</td>
<td>The import file may only author relationships that are either: (1) explicitly listed in the holon‚Äôs type descriptor via InstanceRelationships, or (2) valid inverse relationships, which are resolved via InverseRelationshipType definitions that point back to a DeclaredRelationshipType where the holon‚Äôs type is the TargetType. The system applies updates through the canonical declared direction.</td>
<td>error</td>
</tr>
</tbody>
</table>
<p>Files should be validated against:</p>
<ol>
<li><code>bootstrap-import.schema.json</code> ‚Äî ensures structural correctness</li>
<li>Schema-specific definitions ‚Äî derived from the loaded Meta-Schema or Core Schema</li>
</ol>
<p>Holons are further validated at runtime by MAP‚Äôs shared validators.</p>
<hr />
<h2 id="ready-to-import">üéâ Ready to Import<a class="headerlink" href="#ready-to-import" title="Permanent link">&para;</a></h2>
<p>Once authored and validated, the file can be submitted to the Holon Data Loader.</p>
<ul>
<li>All <code>key</code> and <code>$ref</code> references will be resolved</li>
<li>Relationships will be rewritten as needed</li>
<li>Keyless holons will be embedded</li>
<li>All imported holons will be linked to the HolonSpace via <code>OwnedBy</code></li>
</ul>
<p>For support, contact the MAP stewarding team or refer to the developer documentation.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../rust-api-developers-guide/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Developers Guide to the MAP Rust-API">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Developers Guide to the MAP Rust-API
              </div>
            </div>
          </a>
        
        
          
          <a href="../holon-loader-man-page/" class="md-footer__link md-footer__link--next" aria-label="Next: Holon Data Loader CLI Man Page">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Holon Data Loader CLI Man Page
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "search.highlight", "navigation.top", "navigation.footer", "content.action.edit"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>